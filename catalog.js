let Catalog = () => { return {
  tunings: {
    "hosho" : {
      "name": "Hosho"
      , "left": {
          "1" : "assets/hosho_D.wav" /* down beat */
      }
      , "right": {
          "2" : "assets/hosho_U.wav" /* swoosh */
      }
    },
    "gandanga": {
      "name": "Gandanga"
    , "left": {
          "B0" : "assets/gandanga_b_B0.wav"
          ,"B1" : "assets/gandanga_b_B1.wav"
          ,"B2" : "assets/gandanga_b_B2.wav"
          ,"B3" : "assets/gandanga_b_B3.wav"
          ,"B4" : "assets/gandanga_b_B4.wav"
          ,"B5" : "assets/gandanga_b_B5.wav"
          ,"B6" : "assets/gandanga_b_B6.wav"
          ,"B7" : "assets/gandanga_b_B7.wav"
          ,"L1" : "assets/gandanga_b_L1.wav"
          ,"L2" : "assets/gandanga_b_L2.wav"
          ,"L3" : "assets/gandanga_b_L3.wav"
          ,"L4" : "assets/gandanga_b_L4.wav"
          ,"L5" : "assets/gandanga_b_L5.wav"
          ,"L6" : "assets/gandanga_b_L6.wav"
          ,"L7" : "assets/gandanga_b_L7.wav"
      },
      "right":  {
          "R1" : "assets/gandanga_b_R1.wav"
          ,"R2" : "assets/gandanga_b_R2.wav"
          ,"R3" : "assets/gandanga_b_R3.wav"
          ,"R4" : "assets/gandanga_b_R4.wav"
          ,"R5" : "assets/gandanga_b_R5.wav"
          ,"R6" : "assets/gandanga_b_R6.wav"
          ,"R7" : "assets/gandanga_b_R7.wav"
          ,"R8" : "assets/gandanga_b_R8.wav"
          ,"R9" : "assets/gandanga_b_R9.wav"
          ,"R10" : "assets/gandanga_b_R10.wav"
          ,"R11" : "assets/gandanga_b_R11.wav"  
      }
    },
    "nyamaropa": {
      "name": "Nyamaropa"
    , "left": {
          "B1" : "assets/nyamaropa_b_B1.mp3"
          ,"B2" : "assets/nyamaropa_b_B2.mp3"
          ,"B3" : "assets/nyamaropa_b_B3.mp3"
          ,"B4" : "assets/nyamaropa_b_B4.mp3"
          ,"B5" : "assets/nyamaropa_b_B5.mp3"
          ,"B6" : "assets/nyamaropa_b_B6.mp3"
          ,"B7" : "assets/nyamaropa_b_B7.mp3"
          ,"L1" : "assets/nyamaropa_b_L1.mp3"
          ,"L2" : "assets/nyamaropa_b_L2.mp3"
          ,"L3" : "assets/nyamaropa_b_L3.mp3"
          ,"L4" : "assets/nyamaropa_b_L4.mp3"
          ,"L5" : "assets/nyamaropa_b_L5.mp3"
          ,"L6" : "assets/nyamaropa_b_L6.mp3"
          ,"L7" : "assets/nyamaropa_b_L7.mp3"
        },
      "right":  {
          "R1" : "assets/nyamaropa_b_R1.mp3"
          ,"R2" : "assets/nyamaropa_b_R2.mp3"
          ,"R3" : "assets/nyamaropa_b_R3.mp3"
          ,"R4" : "assets/nyamaropa_b_R4.mp3"
          ,"R5" : "assets/nyamaropa_b_R5.mp3"
          ,"R6" : "assets/nyamaropa_b_R6.mp3"
          ,"R7" : "assets/nyamaropa_b_R7.mp3"
          ,"R8" : "assets/nyamaropa_b_R8.mp3"
          ,"R9" : "assets/nyamaropa_b_R9.mp3"
          ,"R10" : "assets/nyamaropa_b_R10.mp3"
        }
    },
    "nyamaropa-w": {
      "name": "Nyamaropa Workshop"
    , "left": {
         "B1" : "assets/nyamaropa-w-B1.wav"
        ,"B2" : "assets/nyamaropa-w-B2.wav"
        ,"B3" : "assets/nyamaropa-w-B3.wav"
        ,"B4" : "assets/nyamaropa-w-B4.wav"
        ,"B5" : "assets/nyamaropa-w-B5.wav"
        ,"B6" : "assets/nyamaropa-w-B6.wav"
        ,"B7" : "assets/nyamaropa-w-B7.wav"
        ,"L1" : "assets/nyamaropa-w-L1.wav"
        ,"L2" : "assets/nyamaropa-w-L2.wav"
        ,"L3" : "assets/nyamaropa-w-L3.wav"
        ,"L4" : "assets/nyamaropa-w-L4.wav"
        ,"L5" : "assets/nyamaropa-w-L5.wav"
        ,"L6" : "assets/nyamaropa-w-L6.wav"
        ,"L7" : "assets/nyamaropa-w-L7.wav"
    },
      "right":  {
          "R1" : "assets/nyamaropa-w-R1.wav"
        ,"R2" : "assets/nyamaropa-w-R2.wav"
        ,"R3" : "assets/nyamaropa-w-R3.wav"
        ,"R4" : "assets/nyamaropa-w-R4.wav"
        ,"R5" : "assets/nyamaropa-w-R5.wav"
        ,"R6" : "assets/nyamaropa-w-R6.wav"
        ,"R7" : "assets/nyamaropa-w-R7.wav"
        ,"R8" : "assets/nyamaropa-w-R8.wav"
        ,"R9" : "assets/nyamaropa-w-R9.wav"
        ,"R10" : "assets/nyamaropa-w-R10.wav"
      }
    },
    "dambatsoko": {
      "name": "Dambatsoko"
    , "left": {
          "B1" : "assets/dambatsoko_e_B1.mp3"
          ,"B2" : "assets/dambatsoko_e_B2.mp3"
          ,"B3" : "assets/dambatsoko_e_B3.mp3"
          ,"B4" : "assets/dambatsoko_e_B4.mp3"
          ,"B5" : "assets/dambatsoko_e_B5.mp3"
          ,"B6" : "assets/dambatsoko_e_B6.mp3"
          ,"B7" : "assets/dambatsoko_e_B7.mp3"
          ,"L1" : "assets/dambatsoko_e_L1.mp3"
          ,"L2" : "assets/dambatsoko_e_L2.mp3"
          ,"L3" : "assets/dambatsoko_e_L3.mp3"
          ,"L4" : "assets/dambatsoko_e_L4.mp3"
          ,"L5" : "assets/dambatsoko_e_L5.mp3"
          ,"L6" : "assets/dambatsoko_e_L6.mp3"
          ,"L7" : "assets/dambatsoko_e_L7.mp3"
        },
      "right":  {
          "R1" : "assets/dambatsoko_e_R1.mp3"
          ,"R2" : "assets/dambatsoko_e_R2.mp3"
          ,"R3" : "assets/dambatsoko_e_R3.mp3"
          ,"R4" : "assets/dambatsoko_e_R4.mp3"
          ,"R5" : "assets/dambatsoko_e_R5.mp3"
          ,"R6" : "assets/dambatsoko_e_R6.mp3"
          ,"R7" : "assets/dambatsoko_e_R7.mp3"
          ,"R8" : "assets/dambatsoko_e_R8.mp3"
          ,"R9" : "assets/dambatsoko_e_R9.mp3"
          ,"R10" : "assets/dambatsoko_e_R10.mp3"
        }
    }
  },
  load: async function(url) {
    let res = await fetch(url)
    let data = await res.text()
    pieces = {}
    let lines = data.split('\r\n')
    let piece = {}
    let inpiece = false
    for(i in lines) {
      let line = lines[i].trim()
      let tokens = line.split(' ').map(x => x.trim())
      if (tokens.length == 0 || tokens[0].length == 0) {
        // skip
      } else if (tokens[0] == 'piece') {
        inpiece = true
        piece = {}
        piece.name = line.substr('piece '.length)
        piece.text = ""
      } else if (tokens[0] == 'hosho' && inpiece) {
        piece.hosho = line.substr('hosho '.length).split(',').map(x=>x.split(' ').map(x=>x.trim()).filter(x=>x && x!="0"))
      } else if (tokens[0] == 'endpiece') {
        piece.notes = piece.text.split(',').map(x=>x.split(' ').map(x=>x.trim()).filter(x=>x))
        piece.length = piece.notes.length
        pieces[piece.name] = piece
        inpiece = false
      } else if (inpiece) {
        piece.text += line.trim()
      }
    }
    return pieces
  }
}};